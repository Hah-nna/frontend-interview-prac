# Hoisting이란 무엇인지 설명해주실 수 있을까요?

JavaScript에서 호이스팅(hoisting)이란 자바스크립트의 변수와 함수 선언의 작동 방식을 의미한다.
호이스팅은 변수나 함수를 선언하기 전에도 참조할 수 있도록 하는 것으로 자바스크립트 인터프리터가 변수와 함수의 메모리 공간을 선언 전에 미리 할당하는 것을 의마한다.

**호이스팅은 자바스크립트 엔진이 코드를 실행하기 전에 변수와 함수의 선언을 먼저 찾아서 메모리 공간을 설정하고 그 후에 코드를 실행하는 것을 말한다.**

**이로 인해 변수나 함수가 선언된 위치와 상관없이 참조할 수 있다.**

- 변수의 값을 끌어올리는 것이 아니고 변수나 함수를 선언하기 위한 메모리 공간만 할당하는 것이 아니다.
- `var`로 선언한 변수의 경우 호이스팅 시 `undefined`로 변수를 초기화한다.
- `let`과 `const`로 선언한 변수의 경우 호이스팅 시 변수를 초기화하지 않는다.

## 예제

```javascript
//함수의 코드를 실행하기 전에 함수 선언에 대한 메모리를 할당한다.
// 함수를 호출하는 코드를 함수 선언보다 앞서 배치할 수 있다.
function catName(name) {
  console.log("제 고양이의 이름은" + name + "입니다");
}
catName("윤순두");

//"제 고양이의 이름은 윤순두입니다"
```

```javascript
// 함수를 선언하기 전에 먼저 호출 했을 경우

catName("윤순두");

function catName(name) {
  console.log("제 고양이의 이름은" + name + "입니다");
} //제 고양이의 이름은 윤순두입니다"
```

위의 예제는 함수의 호출이 함수 자체보다 앞서 존재하지만 코드가 동작을 한다.

## 호이스팅의 대상

JavaScript는 초기화를 제외한 선언만 호이스팅한다.
`변수선언`,`함수선언`을 호이스팅한다.

### 예시

```javascript
console.log(num); //호이스팅한 var 선언으로 인해 undefined 출력
var num; //선언
num = 6; //초기화
```

_선언 없이 초기화만 존재한다. 호이스팅도 없고 변수를 읽으려는 시도에서는 `ReferenceError` 예외가 발생한다._

```javascript
console.log(num); //ReferenceError
num = 6; //초기화
```

## let과 const 호이스팅

## `let` 과 `const`로 선언한 변수도 호이스팅 대상이지만, `var`와 달리 호이스팅 시 `undefined`로 변수를 초기화하지는 않는다, 변수의 초기화를 수행하기 전에 읽는 코드가 먼저 나타나면 예외가 발생한다.

---

## 호이스팅이 발생하는 이유

실행 컨텍스트의 Lexical Environment는 Environment Record(환경 레코드)와 Outer LexicalEnvironment Reference(외부 렉시컬 환경 참조 컴포넌트)로 구성된다.

Environment Record(환경 레코드)는 유효 범위 안의 식별자와 결과값을 바인드 해서 기록한다.

- 함수 선언, 변수명 등이 담긴다.
- 컨텍스트 내부 전체를 처음부터 끝까지 훑으며 순서대로 수집한다.

**자바스크립트 엔진은 코드가 실행되기 전에도 이미 해당 환경에 속한 코드 변수명들을 알고 있기 때문에 호이스팅이 일어난다.**

- 호이스팅은 정말로 위로 끌려 올려지는 것이 아니라, 변수나 함수를 선언 이전에 사용할 수 있기 때문에 끌어 올려지는 것 처럼 보이는 것이다.

## 호이스팅과 실행 컨텍스트

호이스팅은 자바스크립트에서 변수와 함께 함수 선언이 실행 컨텍스트 (excution context) 내부에서 최상위로 끌어올려지는 것을 말한다.
호이스팅은 코드가 실행되기 전에 변수와 함수 선언문이 메모리에 미리 선언된 것 처럼 동작한다.
**선언된 변수와 함수는 실행 컨텍스트가 생성될 때 메모리에 할당되며, 나중에 선언된 변수와 함수도 선언문이 최상위로 끌어올려져 선언 범위(스코프) 내에서 사용될 수 있도록 된다.**

- `var`은 선언과 할당이 분리되어있기 때문에 변수를 선언할 때 할당하지 않으면 undefined가 할당되는데, 이것은 호이스팅 되었기 때문이다.
- 변수를 미리 선언하지 않았을 때, 에러를 방지하기 위한 방법이 될 수 있지만 혼란스러울 수 있기 때문에 `let`과 `const` 사용을 권장한다.
- 함수 선언문은 호이스팅이 가능하지만, 표현식을 변수에 할당한 경우, 변수는 호이스팅이 되지만 함수 할당은 호이스팅 되지 않는다.
- 변수가 호이스팅되지만 함수가 호이스팅되지 않기 때문에 변수에 함수 표현식을 할당하기 전에 함수를 사용하면 TypeError가 발생한다.

---

## 함수 선언식

```javascript
myFunction(); //"Hello, world!"

function myFunction() {
  console.log("Hello, world!");
}
```

```javascript
function myFunction() {
  console.log("Hello, world!");
}
myFunction(); //"Hello, world"
```

## 함수 표현식

```javascript
myFunction(); //TypeError: myFunction is not a function

var myFunction = function () {
  console.log("Hello, world!");
};
```

```javascript
var myFunction; //변수가 호이스팅됩니다.

myFunction(); //TypeError: myFunction is not a function
myFunction = function () {
  console.log("Hello,world!");
};
```

## TDZ(Temporal Dead Zone)

TDZ Temporal Dead Zone이란 일적인 사각지대, 스코의 시작 지점부터 초기화 시작 지점까지의 구간이다.

- let 또한 선언 전, 실행 컨텍스트 변수 객체에 등록이 되어 호이스팅 되지만, TDZ 구간에 의해 메모리가 할당이 되지 않아 참조 에러(ReferenceError)가 발생한다.

### 자바스크립트 변수의 생성 단계

자바스크립트의 변수는 선언, 초기화, 할당 이라는 3가지 단계에 걸처 생성 된다.

- 선언 단계: 변수를 실행 컨텍스트의 변수 객체에 등록하는 단게. 스코프가 참조하는 대상.
- 초기화 단계: 실행 컨텍스트에 존재 하는 변수 객체에 선언 단계의 변수를 위한 메모리를 만드는 단계. 할당 된 메모리는 undefined로 초기화된다.
- 할당 단계: 사용자가 undefined로 초기화된 메모리의 다른 값을 할당하는 단계

### var의 변수 라이프 사이클

- `var`은 변수 선언전에 선언 단계와 초기화 단계를 동시에 진행한다.
- 실행 컨텍스트 변수 객체의 변수를 등록하고 메모리를 Undefined로 만든다.
- 변수를 선언하기 전에 호출해도 undefined로 호출이 되는 호이스팅이 발생한다.

### let의 라이프 사이클

- var 키워드와 다르게 선언단계, 초기화 단계가 분리되어 진행된다.
- 실행컨텍스트에 변수를 동록했지만 메모리가 할당이 되지 않아 접근 불가( 참조 에러, ReferenceError)가 발생한다.
- 호이스팅이 되지않는가? -> 아님!

### 정리

TDZ는 let또는 const가 선언된 변수에 접근할 수 없는 구간을 말한다.
변수가 선언된 위치에서부터 초기화가 이루어질 때까지 해당 변수를 사용할 수 없는 구간이다.
let, const 키워드는 해당 변수는 선언되었지만, 초기화되지 않은채 TDZ에 진입하게 된다. TDZ내에서 해당
